{"version":3,"file":"index.js","sources":["../src/js/books-api.js","../src/js/books-render.js","../src/js/books-main.js","../src/js/swiper.js"],"sourcesContent":["export default class BooksAPI {\n  static BASE_URL = 'https://books-backend.p.goit.global/books';\n\n  static async fetchCategories() {\n    return this.#fetchData('/category-list', 'Error fetching categories');\n  }\n\n  static async fetchTopBooks() {\n    return this.#fetchData('/top-books', 'Error fetching top books');\n  }\n\n  static async fetchBooksByCategory(category) {\n    return this.#fetchData(\n      `/category?category=${encodeURIComponent(category)}`,\n      'Error fetching books by category'\n    );\n  }\n\n  static async fetchBookById(bookId) {\n    return this.#fetchData(`/${bookId}`, 'Error fetching book by ID');\n  }\n\n  static async #fetchData(endpoint, errorMessage) {\n    try {\n      const response = await fetch(`${this.BASE_URL}${endpoint}`);\n      console.log(`[FETCH] ${this.BASE_URL}${endpoint}`);\n\n      if (!response.ok) {\n        throw new Error(`${errorMessage}: ${response.status}`);\n      }\n\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error(errorMessage, error);\n      throw error;\n    }\n  }\n}\n","export default class BooksRenderer {\n  static renderCategories(categories, container, onCategoryClick) {\n    const allCategory = { list_name: 'All categories' };\n    const categoriesWithAll = [allCategory, ...categories];\n\n    this._categories = categoriesWithAll;\n    this._onCategoryClick = onCategoryClick;\n    this._container = container;\n\n    this.#renderBasedOnScreen();\n    window.addEventListener('resize', this.#handleResize.bind(this));\n  }\n\n  static #handleResize() {\n    const isMobile = window.innerWidth < 1440;\n    if (isMobile !== this._isMobile) {\n      this.#renderBasedOnScreen();\n    }\n  }\n\n  static #renderBasedOnScreen() {\n    this._isMobile = window.innerWidth < 1440;\n    const container = this._container;\n    const categories = this._categories;\n    const onCategoryClick = this._onCategoryClick;\n\n    if (this._isMobile) {\n      container.innerHTML = `\n    <div class=\"dropdown-wrapper\">\n      <select id=\"category-select\" class=\"category-select\">\n        <option value=\"\" disabled selected hidden>Categories</option>\n        ${categories\n          .map(\n            c => `\n            <option value=\"${c.list_name}\">\n              ${c.list_name}\n            </option>`\n          )\n          .join('')}\n      </select>\n    </div>\n  `;\n\n      const select = container.querySelector('#category-select');\n      select.addEventListener('change', e => {\n        onCategoryClick(e.target.value);\n      });\n    } else {\n      container.innerHTML = categories\n        .map(\n          category => `\n          <div \n            class=\"filter-item ${\n              category.list_name === 'All categories' ? 'active' : ''\n            }\"\n            data-category=\"${category.list_name}\"\n            role=\"button\"\n            tabindex=\"0\"\n          >\n            ${category.list_name}\n          </div>\n        `\n        )\n        .join('');\n\n      container.querySelectorAll('.filter-item').forEach(item => {\n        item.addEventListener('click', () => {\n          container\n            .querySelectorAll('.filter-item')\n            .forEach(i => i.classList.remove('active'));\n          item.classList.add('active');\n          onCategoryClick(item.dataset.category);\n        });\n      });\n    }\n  }\n\n  static renderBooks(books, container) {\n    if (!books?.length) {\n      container.innerHTML = '<li class=\"no-books-message\">No books found</li>';\n      return;\n    }\n    container.innerHTML = books\n      .map(book => this.#createBookCard(book))\n      .join('');\n  }\n\n  static renderMoreBooks(books, container) {\n    container.insertAdjacentHTML(\n      'beforeend',\n      books.map(book => this.#createBookCard(book)).join('')\n    );\n  }\n\n  static #createBookCard(book) {\n    return `\n      <li class=\"book-item\">\n        <div class=\"book-image\">\n          ${\n            book.book_image\n              ? `<img src=\"${book.book_image}\" \n              alt=\"${book.title} by ${book.author || 'Unknown Author'}\" \n              loading=\"lazy\" \n              onerror=\"this.src='img/no-image.png';\">`\n              : '<div class=\"no-image\">No image available</div>'\n          }\n        </div>\n        <div class=\"book-details\">\n          <h3 class=\"book-title\">${this.truncateText(book.title, 50)}</h3>\n          <p class=\"book-author\">${book.author || 'Unknown Author'}</p>\n          <p class=\"book-price\">${'$' + book.price}</p>\n          <button class=\"learn-more-btn\" data-id=\"${\n            book._id\n          }\">Learn More</button>\n        </div>\n      </li>\n    `;\n  }\n\n  static updateCounters(displayed, total, showingElement, totalElement) {\n    showingElement.textContent = displayed;\n    totalElement.textContent = total;\n  }\n\n  static toggleShowMoreButton(button, shouldShow) {\n    button.classList.toggle('hidden', !shouldShow);\n  }\n\n  static truncateText(text, maxLength) {\n    return text?.length > maxLength ? text.substring(0, maxLength) + '…' : text;\n  }\n}\n","import BooksAPI from './books-api.js';\nimport BooksRenderer from './books-render.js';\n\nlet currentCategory = '';\nconst booksPerPage = window.innerWidth >= 768 ? 24 : 10;\nlet allBooks = [];\nlet displayedBooks = 0;\n\nconst booksList = document.getElementById('books-list');\nconst filtersList = document.getElementById('filters-list');\nconst showMoreBtn = document.getElementById('show-more-btn');\nconst showingCount = document.getElementById('showing-count');\nconst totalCount = document.getElementById('total-count');\n\ndocument.addEventListener('DOMContentLoaded', initBooksSection);\n\nfunction initBooksSection() {\n  loadCategories();\n  showMoreBtn.addEventListener('click', loadMoreBooks);\n  booksList.addEventListener('click', onBookClick);\n}\n\nfunction loadCategories() {\n  const fixedCategories = [\n    { list_name: 'Combined Print and E-Book Fiction' },\n    { list_name: 'Combined Print and E-Book Nonfiction' },\n    { list_name: 'Hardcover Fiction' },\n    { list_name: 'Paperback Trade Fiction' },\n    { list_name: 'Paperback Nonfiction' },\n    { list_name: 'Advice How-To and Miscellaneous' },\n    { list_name: 'Childrens Middle Grade Hardcover' },\n  ];\n\n  BooksRenderer.renderCategories(\n    fixedCategories,\n    filtersList,\n    onCategoryChange\n  );\n  onCategoryChange('All categories');\n}\n\nfunction onCategoryChange(category) {\n  currentCategory = category === 'All categories' ? '' : category;\n  loadBooks();\n}\n\nasync function loadBooks() {\n  try {\n    showMessage('loading', 'Loading books...');\n    let booksData = currentCategory\n      ? await BooksAPI.fetchBooksByCategory(currentCategory)\n      : (await BooksAPI.fetchTopBooks()).flatMap(c => c.books || []);\n\n    if (!booksData?.length) return showMessage('no-books', 'No books found');\n\n    allBooks = booksData;\n    displayedBooks = Math.min(booksPerPage, allBooks.length);\n    BooksRenderer.renderBooks(allBooks.slice(0, displayedBooks), booksList);\n    updateBooksUI();\n  } catch (err) {\n    console.error('❌ Failed to load books:', err);\n    showMessage('error', 'Could not load books.');\n  }\n}\n\nfunction loadMoreBooks() {\n  const next = Math.min(displayedBooks + 4, allBooks.length);\n  const moreBooks = allBooks.slice(displayedBooks, next);\n  if (!moreBooks.length) return;\n\n  BooksRenderer.renderMoreBooks(moreBooks, booksList);\n  displayedBooks = next;\n  updateBooksUI();\n}\n\nfunction updateBooksUI() {\n  BooksRenderer.updateCounters(\n    displayedBooks,\n    allBooks.length,\n    showingCount,\n    totalCount\n  );\n  BooksRenderer.toggleShowMoreButton(\n    showMoreBtn,\n    displayedBooks < allBooks.length\n  );\n}\nfunction showMessage(type, text) {\n  booksList.innerHTML = `<li class=\"${type}-message\">${text}</li>`;\n}\n","import Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\n\nimport 'swiper/css';\nimport 'swiper/css/pagination';\n\nexport const heroSwiper = new Swiper('.hero-swiper', {\n  modules: [Navigation],\n  speed: 600,\n  slidesPerView: 1,\n  spaceBetween: 20,\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n});\n"],"names":["BooksAPI","__privateMethod","_BooksAPI_static","fetchData_fn","category","bookId","endpoint","errorMessage","response","error","__privateAdd","__publicField","BooksRenderer","categories","container","onCategoryClick","categoriesWithAll","_BooksRenderer_static","renderBasedOnScreen_fn","handleResize_fn","books","book","createBookCard_fn","displayed","total","showingElement","totalElement","button","shouldShow","text","maxLength","c","e","item","i","currentCategory","booksPerPage","allBooks","displayedBooks","booksList","filtersList","showMoreBtn","showingCount","totalCount","initBooksSection","loadCategories","loadMoreBooks","fixedCategories","onCategoryChange","loadBooks","showMessage","booksData","updateBooksUI","err","next","moreBooks","type","Swiper","Navigation"],"mappings":"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"}