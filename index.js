var U=Object.defineProperty;var T=t=>{throw TypeError(t)};var j=(t,e,o)=>e in t?U(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var A=(t,e,o)=>j(t,typeof e!="symbol"?e+"":e,o),R=(t,e,o)=>e.has(t)||T("Cannot "+o);var y=(t,e,o)=>e.has(t)?T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o);var r=(t,e,o)=>(R(t,e,"access private method"),o);import{A as G,i as z,S,N as M,P as x,K as W}from"./assets/vendor-DLvIiUC7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();var c,g;class p{static async fetchCategories(){return r(this,c,g).call(this,"/category-list","Error fetching categories")}static async fetchTopBooks(){return r(this,c,g).call(this,"/top-books","Error fetching top books")}static async fetchBooksByCategory(e){return r(this,c,g).call(this,`/category?category=${encodeURIComponent(e)}`,"Error fetching books by category")}static async fetchBookById(e){return r(this,c,g).call(this,`/${e}`,"Error fetching book by ID")}}c=new WeakSet,g=async function(e,o){try{const i=await fetch(`${this.BASE_URL}${e}`);if(console.log(`[FETCH] ${this.BASE_URL}${e}`),!i.ok)throw new Error(`${o}: ${i.status}`);return await i.json()}catch(i){throw console.error(o,i),i}},y(p,c),A(p,"BASE_URL","https://books-backend.p.goit.global/books");var s,I,w,B;class u{static renderCategories(e,o,i){const a=[{list_name:"All categories"},...e];this._categories=a,this._onCategoryClick=i,this._container=o,r(this,s,w).call(this),window.addEventListener("resize",r(this,s,I).bind(this))}static renderBooks(e,o){if(!(e!=null&&e.length)){o.innerHTML='<li class="no-books-message">No books found</li>';return}o.innerHTML=e.map(i=>r(this,s,B).call(this,i)).join("")}static renderMoreBooks(e,o){o.insertAdjacentHTML("beforeend",e.map(i=>r(this,s,B).call(this,i)).join(""))}static updateCounters(e,o,i,n){i.textContent=e,n.textContent=o}static toggleShowMoreButton(e,o){e.classList.toggle("hidden",!o)}static truncateText(e,o){return(e==null?void 0:e.length)>o?e.substring(0,o)+"…":e}}s=new WeakSet,I=function(){window.innerWidth<1440!==this._isMobile&&r(this,s,w).call(this)},w=function(){this._isMobile=window.innerWidth<1440;const e=this._container,o=this._categories,i=this._onCategoryClick;this._isMobile?(e.innerHTML=`
    <div class="dropdown-wrapper">
      <select id="category-select" class="category-select">
        <option value="" disabled selected hidden>Categories</option>
        ${o.map(a=>`
            <option value="${a.list_name}">
              ${a.list_name}
            </option>`).join("")}
      </select>
    </div>
  `,e.querySelector("#category-select").addEventListener("change",a=>{i(a.target.value)})):(e.innerHTML=o.map(n=>`
          <div 
            class="filter-item ${n.list_name==="All categories"?"active":""}"
            data-category="${n.list_name}"
            role="button"
            tabindex="0"
          >
            ${n.list_name}
          </div>
        `).join(""),e.querySelectorAll(".filter-item").forEach(n=>{n.addEventListener("click",()=>{e.querySelectorAll(".filter-item").forEach(a=>a.classList.remove("active")),n.classList.add("active"),i(n.dataset.category)})}))},B=function(e){return`
      <li class="book-item">
        <div class="book-image">
          ${e.book_image?`<img src="${e.book_image}" 
              alt="${e.title} by ${e.author||"Unknown Author"}" 
              loading="lazy" 
              onerror="this.src='img/no-image.png';">`:'<div class="no-image">No image available</div>'}
        </div>
        <div class="book-details">
          <h3 class="book-title">${this.truncateText(e.title,50)}</h3>
          <p class="book-author">${e.author||"Unknown Author"}</p>
          <p class="book-price">${"$"+e.price}</p>
          <button class="learn-more-btn" data-id="${e._id}">Learn More</button>
        </div>
      </li>
    `},y(u,s);const b=document.querySelector(".book-modal-layer"),K=document.querySelector(".book-desc-wrapper"),J=document.querySelector(".book-img-container"),Q=document.querySelector("[data-category='details']"),$=document.querySelector(".btn-close-modal"),X=document.querySelector(".book-id-input"),P=document.querySelector(".book-form"),N=document.querySelector(".book-amount-wrapper"),F=document.querySelector(".btn-add-to-cart"),H=document.querySelector(".btn-buy"),L=new G(".accordion-container",{duration:400,showMultiple:!0});async function Y(t){try{const e=await p.fetchBookById(t);te(e),Z()}catch(e){console.log(e);return}}function Z(){b.classList.add("is-opened"),b.addEventListener("click",E),$.addEventListener("click",E),document.addEventListener("keydown",ee),P.addEventListener("submit",O),N.addEventListener("click",h),F.addEventListener("click",h),se(),oe()}function f(){b.classList.remove("is-opened"),b.removeEventListener("click",f),$.removeEventListener("click",E),document.removeEventListener("keydown",f),P.removeEventListener("submit",O),N.removeEventListener("click",h),F.removeEventListener("click",h),ce(),ne()}function E(t){(t.currentTarget.classList.contains("book-modal-layer")&&t.target===t.currentTarget||t.currentTarget===$)&&f()}function ee(t){t.code==="Escape"&&f()}function te({_id:t,book_image:e,title:o,author:i,price:n,description:a}){J.innerHTML=`<img class="book-img" src="${e}" alt="">`,Q.textContent=a.length?a:o+" by "+i,K.innerHTML=`
        <h3 class="book-title">${o}</h3>
        <p class="book-author">${i}</p>
        <p class="book-price">&#36;${n}</p>`,X.value=t}function oe(){L.attachEvents()}function ne(){L.closeAll(),L.detachEvents()}function ie(t){let e=Number(document.querySelector('[name="amount"]').value);e++,document.querySelector('[name="amount"]').value=e,e===1&&(document.querySelector(".btn-minus").disabled=!1,H.disabled=!1)}function ae(t){let e=Number(document.querySelector('[name="amount"]').value);e--,document.querySelector('[name="amount"]').value=e,e===0&&(document.querySelector(".btn-minus").disabled=!0,H.disabled=!0)}function re(t){const e=t.target.closest(".book-form"),o={book:e.elements.book.value,quantity:e.elements.amount.value};o.quantity==="0"&&console.log("Book is not added because of the 0 quantity:"),console.log(o)}function h(t){t.target.nodeName==="BUTTON"&&(t.preventDefault(),t.target.classList.contains("btn-add-to-cart")?re(t):t.target.classList.contains("btn-minus")?ae():t.target.classList.contains("btn-plus")&&ie())}function O(t){const e=t.target.elements;console.log("submit",t.target),t.preventDefault();const o={book:e.book.value,title:b.querySelector(".book-title").textContent,quantity:e.amount.value};console.log(o),z.show({title:"Дякуємо за покупку",message:`${o.title} x${o.quantity}`})}function se(){document.querySelector("body").classList.add("menu-open")}function ce(){document.querySelector("body").classList.remove("menu-open")}function le(t){if(t.target.nodeName!=="BUTTON")return;const e=t.target.dataset.id;Y(e)}let C="";const de=window.innerWidth>=768?24:10;let l=[],d=0;const k=document.getElementById("books-list"),ue=document.getElementById("filters-list"),D=document.getElementById("show-more-btn"),me=document.getElementById("showing-count"),ge=document.getElementById("total-count");document.addEventListener("DOMContentLoaded",pe);function pe(){be(),D.addEventListener("click",he),k.addEventListener("click",le)}function be(){const t=[{list_name:"Combined Print and E-Book Fiction"},{list_name:"Combined Print and E-Book Nonfiction"},{list_name:"Hardcover Fiction"},{list_name:"Paperback Trade Fiction"},{list_name:"Paperback Nonfiction"},{list_name:"Advice How-To and Miscellaneous"},{list_name:"Childrens Middle Grade Hardcover"}];u.renderCategories(t,ue,_),_("All categories")}function _(t){C=t==="All categories"?"":t,fe()}async function fe(){try{v("loading","Loading books...");let t=C?await p.fetchBooksByCategory(C):(await p.fetchTopBooks()).flatMap(e=>e.books||[]);if(!(t!=null&&t.length))return v("no-books","No books found");l=t,d=Math.min(de,l.length),u.renderBooks(l.slice(0,d),k),V()}catch(t){console.error("❌ Failed to load books:",t),v("error","Could not load books.")}}function he(){const t=Math.min(d+4,l.length),e=l.slice(d,t);e.length&&(u.renderMoreBooks(e,k),d=t,V())}function V(){u.updateCounters(d,l.length,me,ge),u.toggleShowMoreButton(D,d<l.length)}function v(t,e){k.innerHTML=`<li class="${t}-message">${e}</li>`}const ke=[{id:1,name:"Jane Doe",role:"Book Lover, Reader",text:"Great selection, fast delivery, and beautifully packaged books. My go-to store for weekend reads!",image:"/img/feedbacks/avatar-w.png"},{id:2,name:"John Smith",role:"Editor, BookMag",text:"Customer service was super helpful, and my order arrived earlier than expected. Highly recommend!",image:"/img/feedbacks/avatar-m.png"},{id:3,name:"Emily Johnson",role:"Author, Novelist",text:"Love the curated picks and clear descriptions. Makes it easy to find my next favorite book.",image:"/img/feedbacks/avatar.png"},{id:4,name:"Lucas Bennett",role:"Literature Student",text:"The reviews help me pick the right book every time. Love how easy the layout is!",image:"/img/feedbacks/avatar-m.png"},{id:5,name:"Sophie Miller",role:"Freelance Writer",text:"Beautifully designed website and smooth checkout. The book summaries are spot-on!",image:"/img/feedbacks/avatar-w.png"},{id:6,name:"Daniel Kim",role:"Book Reviewer",text:"Fast delivery and excellent packaging. I’ve already recommended this store to my friends.",image:"/img/feedbacks/avatar-m.png"},{id:7,name:"Amelia Torres",role:"Content Creator",text:"The reading recommendations are always fresh and inspiring. Great job, team!",image:"/img/feedbacks/avatar.png"},{id:8,name:"Oliver Wright",role:"Teacher, Literature Enthusiast",text:"I appreciate the curated collections. Makes finding classroom material a breeze!",image:"/img/feedbacks/avatar-m.png"},{id:9,name:"Hannah Brooks",role:"Book Club Organizer",text:"I can always find niche titles here that I can’t get anywhere else. Fantastic service!",image:"/img/feedbacks/avatar.png"},{id:10,name:"Ethan Clark",role:"Graphic Designer",text:"Love the typography and layout of the reviews section — clean and inviting!",image:"/img/feedbacks/avatar-m.png"},{id:11,name:"Natalie Rivers",role:"Book Blogger",text:"I can always find niche titles here that I can’t get anywhere else. Fantastic service!",image:"/img/feedbacks/avatar-w.png"},{id:12,name:"Michael Lee",role:"Collector of Classics",text:"The rare editions section is a treasure trove. Thank you for keeping print culture alive!",image:"/img/feedbacks/avatar-m.png"}],ye=ke.map(t=>`<li class="swiper-slide feedback-item">
        <p class ="feedback-text-item">${t.text}</p>
        <div class="user-container">
        <img class="swiper-slide image-avatar" src="${t.image}" alt="${t.name}"/>
        <div class="user-info">
        <p class="user-name">${t.name}</p>
        <p class="user-role">${t.role}</p>
        </div>
        </div>
    </li>`).join(""),ve=document.querySelector(".feedback-list");ve.innerHTML=ye;new S(".hero-swiper",{modules:[M],speed:600,loop:!1,keyboard:{enabled:!0,onlyInViewport:!0},slidesPerView:1,spaceBetween:20,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});new S(".events-swiper",{modules:[M,x],speed:350,slidesPerView:"auto",spaceBetween:16,watchOverflow:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});new S(".feedback-swiper",{modules:[M,x,W],speed:600,spaceBetween:24,loop:!1,keyboard:{enabled:!0,onlyInViewport:!0},pagination:{el:".swiper-pagination-feedbacks",clickable:!0,dynamicBullets:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},768:{slidesPerView:2,slidesPerGroup:2},1440:{slidesPerView:3,slidesPerGroup:3}}});function we(){const t=document.body,e=document.querySelector(".mobile-menu"),o=document.querySelector(".mob-menu-btn"),i=document.querySelector(".mob-menu-close-btn");o.addEventListener("click",()=>{e.classList.add("is-open"),t.style.overflow="hidden"}),i.addEventListener("click",()=>{e.classList.remove("is-open"),t.style.overflow=""}),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",a=>{a.preventDefault();const m=n.getAttribute("href"),q=document.querySelector(m);q&&q.scrollIntoView({behavior:"smooth"}),e.contains(n)&&(e.classList.remove("is-open"),t.style.overflow="")})})}we();
//# sourceMappingURL=index.js.map
