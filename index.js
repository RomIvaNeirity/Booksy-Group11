var Z=Object.defineProperty;var $=t=>{throw TypeError(t)};var ee=(t,e,o)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var P=(t,e,o)=>ee(t,typeof e!="symbol"?e+"":e,o),te=(t,e,o)=>e.has(t)||$("Cannot "+o);var N=(t,e,o)=>e.has(t)?$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o);var g=(t,e,o)=>(te(t,e,"access private method"),o);import{S as T,N as q,P as D,K as oe,a as ne,A as ae,i as w}from"./assets/vendor-FszVT6nW.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const se=[{id:1,name:"Jane Doe",role:"Book Lover, Reader",text:"Great selection, fast delivery, and beautifully packaged books. My go-to store for weekend reads!",image:"img/feedbacks/avatar-w.png"},{id:2,name:"John Smith",role:"Editor, BookMag",text:"Customer service was super helpful, and my order arrived earlier than expected. Highly recommend!",image:"img/feedbacks/avatar-m.png"},{id:3,name:"Emily Johnson",role:"Author, Novelist",text:"Love the curated picks and clear descriptions. Makes it easy to find my next favorite book.",image:"img/feedbacks/avatar.png"},{id:4,name:"Lucas Bennett",role:"Literature Student",text:"The reviews help me pick the right book every time. Love how easy the layout is!",image:"img/feedbacks/avatar-m.png"},{id:5,name:"Sophie Miller",role:"Freelance Writer",text:"Beautifully designed website and smooth checkout. The book summaries are spot-on!",image:"img/feedbacks/avatar-w.png"},{id:6,name:"Daniel Kim",role:"Book Reviewer",text:"Fast delivery and excellent packaging. I’ve already recommended this store to my friends.",image:"img/feedbacks/avatar-m.png"},{id:7,name:"Amelia Torres",role:"Content Creator",text:"The reading recommendations are always fresh and inspiring. Great job, team!",image:"img/feedbacks/avatar.png"},{id:8,name:"Oliver Wright",role:"Teacher, Literature Enthusiast",text:"I appreciate the curated collections. Makes finding classroom material a breeze!",image:"img/feedbacks/avatar-m.png"},{id:9,name:"Hannah Brooks",role:"Book Club Organizer",text:"I can always find niche titles here that I can’t get anywhere else. Fantastic service!",image:"img/feedbacks/avatar.png"},{id:10,name:"Ethan Clark",role:"Graphic Designer",text:"Love the typography and layout of the reviews section — clean and inviting!",image:"img/feedbacks/avatar-m.png"},{id:11,name:"Natalie Rivers",role:"Book Blogger",text:"I can always find niche titles here that I can’t get anywhere else. Fantastic service!",image:"img/feedbacks/avatar-w.png"},{id:12,name:"Michael Lee",role:"Collector of Classics",text:"The rare editions section is a treasure trove. Thank you for keeping print culture alive!",image:"img/feedbacks/avatar-m.png"}],ie=se.map(t=>`<li class="swiper-slide feedback-item">
        <p class ="feedback-text-item">${t.text}</p>
        <div class="user-container">
        <img class="swiper-slide image-avatar" src="${t.image}" alt="${t.name}"/>
        <div class="user-info">
        <p class="user-name">${t.name}</p>
        <p class="user-role">${t.role}</p>
        </div>
        </div>
    </li>`).join(""),re=document.querySelector(".feedback-list");re.innerHTML=ie;new T(".hero-swiper",{modules:[q],speed:600,loop:!1,keyboard:{enabled:!0,onlyInViewport:!0},slidesPerView:1,spaceBetween:20,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});new T(".events-swiper",{modules:[q,D],speed:350,slidesPerView:"auto",spaceBetween:16,watchOverflow:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});new T(".feedback-swiper",{modules:[q,D,oe],speed:600,spaceBetween:24,loop:!1,keyboard:{enabled:!0,onlyInViewport:!0},pagination:{el:".swiper-pagination-feedbacks",clickable:!0,dynamicBullets:!0,dynamicMainBullets:4},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},768:{slidesPerView:2,slidesPerGroup:2},1440:{slidesPerView:3,slidesPerGroup:3}}});class y{static async fetchCategories(){const{data:e}=await this.axiosInstance.get("/books/category-list");return e}static async fetchTopBooks(){const{data:e}=await this.axiosInstance.get("/books/top-books");return e}static async fetchBooksByCategory(e){const{data:o}=await this.axiosInstance.get("/books/category",{params:{category:e}});return o}static async fetchBookById(e){const{data:o}=await this.axiosInstance.get(`/books/${e}`);return o}}P(y,"axiosInstance",ne.create({baseURL:"https://books-backend.p.goit.global",timeout:1e4}));var c,F,E,C;class f{static renderCategories(e,o,a){const s=[{list_name:"All categories"},...e];this._categories=s,this._onCategoryClick=a,this._container=o,g(this,c,E).call(this),window.addEventListener("resize",g(this,c,F).bind(this))}static renderBooks(e,o){if(!(e!=null&&e.length)){o.innerHTML='<li class="no-books-message">No books found</li>';return}o.innerHTML=e.map(a=>g(this,c,C).call(this,a)).join("")}static renderMoreBooks(e,o){o.insertAdjacentHTML("beforeend",e.map(a=>g(this,c,C).call(this,a)).join(""))}static updateCounters(e,o,a,n){a.textContent=e,n.textContent=o}static toggleShowMoreButton(e,o){e.classList.toggle("hidden",!o)}static truncateText(e,o){return(e==null?void 0:e.length)>o?e.substring(0,o)+"…":e}}c=new WeakSet,F=function(){window.innerWidth<768!==this._isMobile&&g(this,c,E).call(this)},E=function(){this._isMobile=window.innerWidth<768;const e=this._container,o=this._categories,a=this._onCategoryClick;if(this._isMobile){e.innerHTML=`
    <div class="dropdown-wrapper">
    <select id="category-select" class="category-select">
      <option value="" disabled selected hidden>Categories</option>
      ${o.map(s=>`<option value="${s.list_name}">${s.list_name}</option>`).join("")}
    </select>
    <svg class="dropdown-arrow" width="24" height="24" viewBox="0 0 24 25">
  <use href="src/img/icons.svg#dropdown-arrow"></use>
</svg>
  </div>
  `;const n=e.querySelector("#category-select");a("All categories"),n.addEventListener("change",s=>{a(s.target.value)})}else e.innerHTML=o.map(n=>`
            <div
              class="filter-item ${n.list_name==="All categories"?"active":""}"
              data-category="${n.list_name}"
              role="button"
              tabindex="0"
            >
              ${n.list_name}
            </div>
          `).join(""),e.querySelectorAll(".filter-item").forEach(n=>{n.addEventListener("click",()=>{e.querySelectorAll(".filter-item").forEach(s=>s.classList.remove("active")),n.classList.add("active"),a(n.dataset.category)})})},C=function(e){return`
      <li class="book-item">
        <div class="book-image">
          ${e.book_image?`<img src="${e.book_image}"
                  alt="${e.title} by ${e.author||"Unknown Author"}"
                  loading="lazy"
                  onerror="this.src='img/no-image.png';">`:'<div class="no-image">No image available</div>'}
        </div>
        <div class="book-details">
          <div class="book-name-wrapper">
            <h3 class="book-title">${this.truncateText(e.title,50)}</h3>
            <p class="book-author">${e.author||"Unknown Author"}</p>
          </div>
          <p class="book-price">${e.price?`$${e.price}`:"N/A"}</p>
        </div>
        <button class="btn btn-secondary learn-more-btn" data-id="${e._id}">Learn More</button>
      </li>
    `},N(f,c);const v=document.querySelector(".book-modal-layer"),ce=document.querySelector(".book-desc-wrapper"),le=document.querySelector(".book-img-container"),de=document.querySelector("[data-category='details']"),x=document.querySelector(".btn-close-modal"),ue=document.querySelector(".book-id-input"),H=document.querySelector(".book-form"),O=document.querySelector(".book-amount-wrapper"),V=document.querySelector(".btn-add-to-cart"),R=document.querySelector(".btn-buy"),M=new ae(".accordion-container",{duration:400,showMultiple:!0});async function me(t){try{const e=await y.fetchBookById(t);pe(e),ge()}catch(e){console.log(e);return}}function ge(){v.classList.add("is-opened"),v.addEventListener("click",S),x.addEventListener("click",S),document.addEventListener("keydown",fe),H.addEventListener("submit",G),O.addEventListener("click",B),V.addEventListener("click",B),we(),be()}function L(){v.classList.remove("is-opened"),v.removeEventListener("click",L),x.removeEventListener("click",S),document.removeEventListener("keydown",L),H.removeEventListener("submit",G),O.removeEventListener("click",B),V.removeEventListener("click",B),Le(),ke()}function S(t){(t.currentTarget.classList.contains("book-modal-layer")&&t.target===t.currentTarget||t.currentTarget===x)&&L()}function fe(t){t.code==="Escape"&&L()}function pe({_id:t,book_image:e,title:o,author:a,price:n,description:s}){le.innerHTML=`<img class="book-img" src="${e}" alt="">`,de.textContent=s.length?s:o+" by "+a,ce.innerHTML=`
        <h3 class="book-title">${o}</h3>
        <p class="book-author">${a}</p>
        <p class="book-price">&#36;${n}</p>`,ue.value=t}function be(){M.attachEvents()}function ke(){M.closeAll(),M.detachEvents()}function ye(t){let e=Number(document.querySelector('[name="amount"]').value);e++,document.querySelector('[name="amount"]').value=e,e===1&&(document.querySelector(".btn-minus").disabled=!1,R.disabled=!1)}function ve(t){let e=Number(document.querySelector('[name="amount"]').value);e--,document.querySelector('[name="amount"]').value=e,e===0&&(document.querySelector(".btn-minus").disabled=!0,R.disabled=!0)}function he(t){const e=t.target.closest(".book-form"),o={book:e.elements.book.value,quantity:e.elements.amount.value};o.quantity==="0"&&console.log("Book is not added because of the 0 quantity:"),console.log(o)}function B(t){t.target.nodeName==="BUTTON"&&(t.preventDefault(),t.target.classList.contains("btn-add-to-cart")?he(t):t.target.classList.contains("btn-minus")?ve():t.target.classList.contains("btn-plus")&&ye())}function G(t){const e=t.target.elements;console.log("submit",t.target),t.preventDefault();const o={book:e.book.value,title:v.querySelector(".book-title").textContent,quantity:e.amount.value};console.log(o),w.show({title:"Дякуємо за покупку",message:`${o.title} x${o.quantity}`})}function we(){document.querySelector("body").classList.add("menu-open")}function Le(){document.querySelector("body").classList.remove("menu-open")}function Be(t){if(t.target.nodeName!=="BUTTON")return;const e=t.target.dataset.id;me(e)}let I="",j=10,l=[],d=0;const p=document.getElementById("books-list"),Ee=document.getElementById("filters-list"),z=document.getElementById("show-more-btn"),Ce=document.getElementById("showing-count"),Me=document.getElementById("total-count");document.addEventListener("DOMContentLoaded",Se);async function Se(){Te(),await qe(),Ie()}function Ie(){z.addEventListener("click",Ae),p.addEventListener("click",Be)}function Te(){j=window.innerWidth>=768?24:10}async function qe(){try{K("Loading categories...");const t=await y.fetchCategories(),e=["Combined Print and E-Book Fiction","Combined Print and E-Book Nonfiction","Hardcover Fiction","Paperback Trade Fiction","Paperback Nonfiction","Advice How-To and Miscellaneous","Childrens Middle Grade Hardcover"],o=t.filter(a=>e.includes(a.list_name));f.renderCategories(o,Ee,a=>_(a)),_("All categories")}catch{U("Could not load categories.")}}function _(t){I=t==="All categories"?"":t,xe()}async function xe(){try{K("Loading books...");let t=[];if(I?t=await y.fetchBooksByCategory(I):t=(await y.fetchTopBooks()).flatMap(o=>o.books||[]),!t.length){$e();return}l=t,d=Math.min(j,l.length),f.renderBooks(l.slice(0,d),p),W()}catch{U("Could not load books.")}}function Ae(){const t=Math.min(d+4,l.length),e=l.slice(d,t);e.length>0&&(f.renderMoreBooks(e,p),d=t,W())}function K(t="Loading..."){p.innerHTML=`<li class="loading-message">${t}</li>`}function U(t){p.innerHTML=`<li class="error-message">${t}</li>`}function $e(){p.innerHTML='<li class="no-books-message">No books found</li>'}function W(){f.updateCounters(d,l.length,Ce,Me),f.toggleShowMoreButton(z,d<l.length)}function Pe(){const t=document.querySelector(".mobile-menu"),e=document.querySelector(".mob-menu-btn"),o=document.querySelector(".mob-menu-close-btn"),a=document.querySelectorAll(".nav-link, .mob-nav-link"),n=()=>{t.classList.add("is-open"),document.body.classList.add("menu-open")},s=()=>{t.classList.remove("is-open"),document.body.classList.remove("menu-open")};e&&e.addEventListener("click",n),o&&o.addEventListener("click",s),a.forEach(r=>{r.addEventListener("click",b=>{const u=r.getAttribute("href"),m=document.querySelector(u);m&&(b.preventDefault(),m.scrollIntoView({behavior:"smooth"})),r.classList.contains("mob-nav-link")&&s()})})}function Ne(){const t=document.getElementById("contactsModal"),e=document.getElementById("modalBackdrop"),o=document.getElementById("modalClose"),a=document.getElementById("contactsForm"),n=document.querySelectorAll(".open-modal-btn"),s=t.querySelector(".modal-contacts-text"),r="register-form-data",b=a.elements.name,u=a.elements.email,m=a.elements.message;function J(i=""){s.textContent=i,t.style.display="block",e.style.display="block",document.body.classList.add("modal-open"),localStorage.removeItem(r),a.reset(),window.addEventListener("keydown",A)}function h(){t.style.display="none",e.style.display="none",document.body.classList.remove("modal-open"),window.removeEventListener("keydown",A)}function A(i){i.key==="Escape"&&h()}n.forEach(i=>{i.addEventListener("click",k=>{k.preventDefault();const X=i.dataset.subtitle||"";J(X)})}),o.addEventListener("click",h),e.addEventListener("click",i=>{i.target===e&&h()});function Y(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}function Q(){const i={name:b.value.trim(),email:u.value.trim(),message:m.value.trim()};localStorage.setItem(r,JSON.stringify(i))}[b,u,m].forEach(i=>i.addEventListener("input",Q)),a.addEventListener("submit",async i=>{if(i.preventDefault(),!Y(u.value.trim())){w.error({title:"Error",message:"Please enter a valid email.",position:"topRight",backgroundColor:" #b44a04",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff"});return}b.value.trim(),u.value.trim(),m.value.trim();try{await new Promise(k=>setTimeout(k,1e3)),w.success({title:"Successfully",message:"Data sent successfully!",position:"topRight",backgroundColor:"#e15d05",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff"}),localStorage.removeItem(r),a.reset(),setTimeout(()=>h(),200)}catch{w.error({title:"Error",message:"An error occurred. Please try again.",position:"topRight",backgroundColor:"#ff4757",titleColor:"#fff",messageColor:"#fff",iconColor:"#fff"})}})}Pe();Ne();
//# sourceMappingURL=index.js.map
